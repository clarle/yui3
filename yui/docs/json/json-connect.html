<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Example: JSON with Y.io - YUI Library</title>

    <meta name="viewport" content="width=960" id="meta-viewport">
    <script>
    if (screen.width < 768) {
        document.getElementById('meta-viewport').setAttribute('content', 'width=768');
    }
    </script>

    
    
    





    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic,700italic">

    <link rel="stylesheet" href="https://yui-s.yahooapis.com/3.9.0/build/cssgrids/cssgrids-min.css">


    <link rel="stylesheet" href="/yui3/combo/css-main-min.css">



    <link rel="stylesheet" href="/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="/css/docs-min.css">




<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
<meta http-equiv="X-XRDS-Location" content="/xrds.xml">

    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@yuilibrary">
    <meta name="twitter:creator" content="@yuilibrary">
    <meta name="twitter:url" content="http://yuilibrary.com/yui/docs/json/json-connect.html">
    <meta name="twitter:title" content="Example: JSON with Y.io">
    <meta name="twitter:description" content="Use JSON to parse data received via XMLHttpRequest via Y.io calls — a simple JSON use case.">
    

<link rel="shortcut icon" type="image/png" href="/img/favicon.png">




    

    <script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-29453705-2']);
    _gaq.push(['_trackPageview']);
    </script>



    

    
        <script>
        var YUI_config={"filter":"min","maxURLLength":1024,"root":"3.17.2/","groups":{"site":{"combine":true,"comboBase":"/combo/js?","root":"","modules":{"hoverable":{"path":"hoverable-min.js","requires":["event-hover","node-base","node-event-delegate"]},"search":{"path":"search-min.js","requires":["autocomplete","autocomplete-highlighters","node-pluginhost"]},"api-filter":{"path":"apidocs/api-filter-min.js","requires":["autocomplete-base","autocomplete-highlighters","autocomplete-sources"]},"api-list":{"path":"apidocs/api-list-min.js","requires":["api-filter","api-search","event-key","node-focusmanager","tabview"]},"api-search":{"path":"apidocs/api-search-min.js","requires":["autocomplete-base","autocomplete-highlighters","autocomplete-sources","escape"]}}}}};
        if (location.protocol.indexOf('https') > -1) {
            YUI_config.comboBase = 'https://yui-s.yahooapis.com/combo?';
            YUI_config.combine = true;
        }
        </script>
    

    
        <script src="https://yui-s.yahooapis.com/3.17.2/build/yui/yui-min.js"></script>
    


</head>
<body class="yui3-skin-sam">

<!--
<a href="/yuiconf/" class="yuiconf ribbon">
    <img src="/yui3/img/yuiconf/2013/ribbon.png" alt="YUIConf 2013" width="139" height="139">
</a>
-->

<div id="doc">
    <div id="hd" class="yui3-g"><header>
        <div class="content">
            <div class="yui3-u-3-4">
                <a href="/" rel="home"><div id="hd-logo" role="image" aria-label="YUI logo"></div></a>
                
                
            </div>

            <div class="yui3-u-1-4">
                <form id="main-search" class="search" action="http://search.yahoo.com/search"
        method="get" role="search">

    <input type="search" class="search-input" name="q"
            aria-label="Search docs and APIs"
            placeholder="Search docs and APIs">

    <input type="hidden" name="vs" value="yuilibrary.com">
    <input type="hidden" name="vs" value="yuiblog.com">
</form>

            </div>

            <div id="main-nav" class="yui3-u"><nav>
    <ul class="nav hoverable-group">
        
            <li class="nav-tab hoverable ">
                <a href="/">Home</a>
                
            </li>
        
            <li class="nav-tab hoverable ">
                <a href="/yui/quick-start/">Quick Start</a>
                
                    <ul class="nav-submenu">
                        
                            <li class="nav-child ">
                                
                                    <a href="/yui/configurator/">Configurator</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/download/yui3/">Download YUI 3</a>
                                
                            </li>
                        
                    </ul>
                
            </li>
        
            <li class="nav-tab hoverable  nav-tab-active">
                <a href="/yui/docs/">Documentation</a>
                
                    <ul class="nav-submenu">
                        
                            <li class="nav-child ">
                                
                                    <a href="/yui/docs/guides/">User Guides</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/yui/docs/examples/">Examples</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/yui/docs/api/">API Docs</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/yui/environments/">Environments</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/yui/docs/tutorials/">Tutorials</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/yui/docs/tutorials/faq/">FAQ</a>
                                
                            </li>
                        
                    </ul>
                
            </li>
        
            <li class="nav-tab hoverable nav-break">
                <a href="/community/">Community</a>
                
                    <ul class="nav-submenu">
                        
                            <li class="nav-child ">
                                
                                    <a href="/gallery/">Gallery</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="http://yuiblog.com/">Blog</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/forum/">Forums</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/theater/">YUI Theater</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="https://github.com/yui/yui3/wiki/Development-Schedule" target="_blank" title="External link">Calendar &#187;</a>
                                
                            </li>
                        
                    </ul>
                
            </li>
        
            <li class="nav-tab hoverable ">
                <a href="/contribute/">Contribute</a>
                
                    <ul class="nav-submenu">
                        
                            <li class="nav-child ">
                                
                                    <a href="https://github.com/yui/" target="_blank" title="External link">YUI on GitHub &#187;</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/projects/yui3/newticket/">File a Ticket</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/projects/yui3/report/">View Tickets</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/projects/yui3/dashboard/">Dashboard</a>
                                
                            </li>
                        
                    </ul>
                
            </li>
        
            <li class="nav-tab hoverable ">
                <a href="/projects/">Other Projects</a>
                
                    <ul class="nav-submenu">
                        
                            <li class="nav-child ">
                                
                                    <a href="http://yui.github.com/shifter/" target="_blank" title="External link">Shifter &#187;</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="http://yui.github.com/yogi/" target="_blank" title="External link">Yogi &#187;</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/projects/yui2/">YUI 2</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="http://yui.github.com/yuidoc/" target="_blank" title="External link">YUI Doc &#187;</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/projects/yuitest/">YUI Test</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/projects/yuilibrary/">YUI Website</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="http://yui.github.com/yuicompressor/" target="_blank" title="External link">YUI Compressor &#187;</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="http://github.com/yui/builder" target="_blank" title="External link">YUI Builder &#187;</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/projects/phploader/">YUI PHP Loader</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="http://yui.github.com/gridbuilder/" target="_blank" title="External link">Grid Builder &#187;</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="http://yui.github.com/skinbuilder/" target="_blank" title="External link">Skin Builder &#187;</a>
                                
                            </li>
                        
                    </ul>
                
            </li>
        
    </ul>
</nav></div>

        </div>
    </header></div>

    <div id="bd" class="clearfix yui3-g">
        
    <div id="breadcrumbs" class="yui3-u-1">
        <ul class="breadcrumbs">
            
                <li class="crumb"><a href="/yui/docs/">YUI</a></li>
                
                    <li class="separator">&gt;</li>
                
            
                <li class="crumb"><a href="/yui/utilities/">Utilities</a></li>
                
                    <li class="separator">&gt;</li>
                
            
                <li class="crumb"><a href="/yui/docs/json/">JSON</a></li>
                
                    <li class="separator">&gt;</li>
                
            
                <li class="crumb"><a href="/yui/docs/json/json-connect.html">Example: JSON with Y.io</a></li>
                
            
        </ul>
    </div>


        
    
        <div class="project-version yui3-u">Version 3.17.2</div>
    



        

        
            
    


            




    



<div class="yui3-u-1">
    <div id="docs-hd" class="content">
        <h1>Example: JSON with Y.io</h1>

        
    </div>
</div>

<div class="yui3-u-3-4 print-max-width">
    <div id="docs-main" class="content">
        <div class="intro">
<p>
    A natural fit for the JSON module is to work with IO to parse JSON messages received via XMLHttpRequest (XHR). In this example, we'll request JSON data from the server using the <a href="/yui/docs/api/classes/IO.html#method_io"><code>Y.io()</code></a> method and parse the resulting JSON string data.
</p>
</div>

<div class="example yui3-skin-sam">
    <div id="demo" class="yui3-skin-sam">
    <p>Click the <em>Get Messages</em> button to send the request to the server; the response will be displayed below the button.</p>
    <p><button>Get Messages</button></p>
    <div id="demo-messages"></div>
</div>

<script>
// Create business logic in a YUI sandbox using the 'io' and 'json' modules
YUI().use("node", "io", "dump", "json-parse", function (Y) {

    // capture the node that we'll display the messages in
    var target = Y.one('#demo-messages');

    // Create the io callback/configuration
    var callback = {

        timeout : 3000,

        on : {
            success : function (x,o) {
                Y.log("RAW JSON DATA: " + o.responseText);

                var messages = [],
                    html = '', i, l;

                // Process the JSON data returned from the server
                try {
                    messages = Y.JSON.parse(o.responseText);
                }
                catch (e) {
                    alert("JSON Parse failed!");
                    return;
                }

                Y.log("PARSED DATA: " + Y.Lang.dump(messages));

                // The returned data was parsed into an array of objects.
                // Add a P element for each received message
                for (i=0, l=messages.length; i < l; ++i) {
                    html += '<p>' + messages[i].animal + ' says "' +
                                    messages[i].message + '"</p>';
                }

                // Use the Node API to apply the new innerHTML to the target
                target.setHTML(html);
            },

            failure : function (x,o) {
                alert("Async call failed!");
            }

        }
    };

    // Attach a click event listener to the button #demo_btn to send the request
    Y.one('#demo button').on('click',function (e) {
        // Make the call to the server for JSON data
        Y.io("../assets/json/json-connect-response.json", callback);
    });

});
</script>

</div>

<h2>Use <code>Y.JSON.parse</code> in the <code>success</code> handler</h2>

<p>
    Pass the XHR <code>responseText</code> to <code>Y.JSON.parse()</code> and capture the return value. Note that the <code>parse()</code> method can throw a <code>SyntaxError</code> exception, so be sure to wrap the call in a <code>try&#x2F;catch</code> block.
</p>

<pre class="code prettyprint lang-javascript">Y.io(&#x27;..&#x2F;assets&#x2F;json&#x2F;json-connect-response.json&#x27;, {
    on : {
        success : function (tx, r) {
            var parsedResponse;

            &#x2F;&#x2F; protected against malformed JSON response
            try {
               parsedResponse = Y.JSON.parse(r.responseText);
            }
            catch (e) {
                alert(&quot;JSON Parse failed!&quot;);
                return;
            }
        }
    }
});</pre>


<p>
    The <code>parse()</code> method returns the native JavaScript object representation of the string data returned from the <a href="/yui/docs/api/classes/IO.html#method_io"><code>Y.io()</code></a> call. In this case, the data is an array of object literals in this form:
</p>

<pre class="code prettyprint lang-json">[
    { &quot;animal&quot; : &quot;Cat&quot;,  &quot;message&quot; : &quot;Meow&quot;  },
    { &quot;animal&quot; : &quot;Dog&quot;,  &quot;message&quot; : &quot;Woof&quot;  },
    { &quot;animal&quot; : &quot;Cow&quot;,  &quot;message&quot; : &quot;Moo&quot;   },
    { &quot;animal&quot; : &quot;Duck&quot;, &quot;message&quot; : &quot;Quack&quot; },
    { &quot;animal&quot; : &quot;Lion&quot;, &quot;message&quot; : &quot;Roar&quot;  }
]</pre>


<p>
    In the <code>success</code> handler we'll simply loop through this array and outputting its contents to the DOM.
</p>

<h2>Complete Example Source</h2>
<pre class="code prettyprint">&lt;div id=&quot;demo&quot; class=&quot;yui3-skin-sam&quot;&gt;
    &lt;p&gt;Click the &lt;em&gt;Get Messages&lt;&#x2F;em&gt; button to send the request to the server; the response will be displayed below the button.&lt;&#x2F;p&gt;
    &lt;p&gt;&lt;button&gt;Get Messages&lt;&#x2F;button&gt;&lt;&#x2F;p&gt;
    &lt;div id=&quot;demo-messages&quot;&gt;&lt;&#x2F;div&gt;
&lt;&#x2F;div&gt;

&lt;script&gt;
&#x2F;&#x2F; Create business logic in a YUI sandbox using the &#x27;io&#x27; and &#x27;json&#x27; modules
YUI().use(&quot;node&quot;, &quot;io&quot;, &quot;dump&quot;, &quot;json-parse&quot;, function (Y) {

    &#x2F;&#x2F; capture the node that we&#x27;ll display the messages in
    var target = Y.one(&#x27;#demo-messages&#x27;);

    &#x2F;&#x2F; Create the io callback&#x2F;configuration
    var callback = {

        timeout : 3000,

        on : {
            success : function (x,o) {
                Y.log(&quot;RAW JSON DATA: &quot; + o.responseText);

                var messages = [],
                    html = &#x27;&#x27;, i, l;

                &#x2F;&#x2F; Process the JSON data returned from the server
                try {
                    messages = Y.JSON.parse(o.responseText);
                }
                catch (e) {
                    alert(&quot;JSON Parse failed!&quot;);
                    return;
                }

                Y.log(&quot;PARSED DATA: &quot; + Y.Lang.dump(messages));

                &#x2F;&#x2F; The returned data was parsed into an array of objects.
                &#x2F;&#x2F; Add a P element for each received message
                for (i=0, l=messages.length; i &lt; l; ++i) {
                    html += &#x27;&lt;p&gt;&#x27; + messages[i].animal + &#x27; says &quot;&#x27; +
                                    messages[i].message + &#x27;&quot;&lt;&#x2F;p&gt;&#x27;;
                }

                &#x2F;&#x2F; Use the Node API to apply the new innerHTML to the target
                target.setHTML(html);
            },

            failure : function (x,o) {
                alert(&quot;Async call failed!&quot;);
            }

        }
    };

    &#x2F;&#x2F; Attach a click event listener to the button #demo_btn to send the request
    Y.one(&#x27;#demo button&#x27;).on(&#x27;click&#x27;,function (e) {
        &#x2F;&#x2F; Make the call to the server for JSON data
        Y.io(&quot;..&#x2F;assets&#x2F;json&#x2F;json-connect-response.json&quot;, callback);
    });

});
&lt;&#x2F;script&gt;</pre>


    </div>
</div>

<div class="yui3-u-1-4">
    <div id="docs-sidebar" class="sidebar">
        
            
        

        

        
            
                <div class="sidebox">
                    <div class="hd">
                        <h2 class="no-toc">Examples</h2>
                    </div>

                    <div class="bd">
                        <ul class="examples">
                            
                                
                                    <li data-description="Use JSON to parse data received via XMLHttpRequest via Y.io calls — a simple JSON use case.">
                                        <a href="json-connect.html">JSON with Y.io</a>
                                    </li>
                                
                            
                                
                                    <li data-description="Use the replacer and reviver parameters to reconstitute object instances that have been serialized to JSON.">
                                        <a href="json-freeze-thaw.html">Rebuilding Class Instances from JSON Data</a>
                                    </li>
                                
                            
                                
                                    <li data-description="Use a currency conversion calculation to add a new price member to a JSON response, demonstrating how JSON data, once retrieved, can be transformed during parsing.">
                                        <a href="json-convert-values.html">Adding New Object Members During Parsing</a>
                                    </li>
                                
                            
                                
                            
                                
                            
                        </ul>
                    </div>
                </div>
            
        

        
            
                <div class="sidebox">
                    <div class="hd">
                        <h2 class="no-toc">Related Examples</h2>
                    </div>

                    <div class="bd">
                        <ul class="examples">
                            
                                
                            
                                
                            
                                
                            
                                
                                    <li data-description="A basic todo list built with the Model, Model List, and View components.">
                                        <a href="../app/app-todo.html">Todo List</a>
                                    </li>
                                
                            
                                
                                    <li data-description="Portal style example using Drag &amp; Drop Event Bubbling and Animation.">
                                        <a href="../dd/portal-drag.html">Portal Style Example</a>
                                    </li>
                                
                            
                        </ul>
                    </div>
                </div>
            
        
    </div>
</div>




        
    </div>

    <div id="ft"><footer>
        <p class="copyright">
        All code on this site is licensed under the <a href="/license/">BSD License</a> unless stated otherwise.<br>
        <span class="links"><a href="/about/">About This Site</a> &middot; <a href="/security/">Security Contact Info</a></span>
        </p>
    </footer></div>
</div>






    <script src="/yui3/combo/js-search-min.js-hoverable-min.js-main-min.js"></script>



    <script src="/vendor/prettify/prettify-min.js"></script>
    <script>prettyPrint();</script>



    <script>
    (function() {
        var ga = document.createElement('script'); ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    }());

    (function() {
        var ya = document.createElement('script'); ya.async = true;
        ya.src = ('https:' == document.location.protocol ? 'https://s' : 'http://d') + '.yimg.com/mi/ywa.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ya, s);

        window.onload = function () {
            try {
                var YWATracker = YWA.getTracker("10001393677061", "US");
                YWATracker.submit();
            } catch (eYWATCUnavailable) {
                if (window.console && window.console.warn) {
                    window.console.warn(eYWATCUnavailable.message || "Unknown error");
                }
            }
        };
    }());
    </script>




</body>
</html>
