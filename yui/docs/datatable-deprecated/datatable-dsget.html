<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Example: DataTable + DataSource.Get + JSON Data - YUI Library</title>

    <meta name="viewport" content="width=960" id="meta-viewport">
    <script>
    if (screen.width < 768) {
        document.getElementById('meta-viewport').setAttribute('content', 'width=768');
    }
    </script>

    




    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic,700italic">

    <link rel="stylesheet" href="http://yui.yahooapis.com/3.8.0/build/cssgrids/cssgrids-min.css">


    <link rel="stylesheet" href="/combo/css-main-min.css">



    <link rel="stylesheet" href="/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="/css/docs-min.css">




<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
<meta http-equiv="X-XRDS-Location" content="/xrds.xml">
<link rel="shortcut icon" type="image/png" href="/img/favicon.png">




    

    <script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-29453705-2']);
    _gaq.push(['_trackPageview']);
    </script>



    

    
        <script>var YUI_config={"filter":"min","maxURLLength":1024,"root":"3.8.0/","groups":{"site":{"combine":true,"comboBase":"/combo/js?","root":"","modules":{"hoverable":{"path":"hoverable-min.js","requires":["event-hover","node-base","node-event-delegate"]},"search":{"path":"search-min.js","requires":["autocomplete","autocomplete-highlighters","node-pluginhost"]},"api-filter":{"path":"apidocs/api-filter-min.js","requires":["autocomplete-base","autocomplete-highlighters","autocomplete-sources"]},"api-list":{"path":"apidocs/api-list-min.js","requires":["api-filter","api-search","event-key","node-focusmanager","tabview"]},"api-search":{"path":"apidocs/api-search-min.js","requires":["autocomplete-base","autocomplete-highlighters","autocomplete-sources","escape"]}}}}};</script>
    

    
        <script src="http://yui.yahooapis.com/3.8.0/build/yui/yui-min.js"></script>
    


</head>
<body class="yui3-skin-sam">

<!--
<a href="/yuiconf/2012/" class="yuiconf ribbon">
    <img src="/img/yuiconf/2012/ribbon.png" alt="YUIConf 2012">
</a>
-->

<div id="doc">
    <div id="hd" class="yui3-g"><header>
        <div class="content">
            <div class="yui3-u-3-4">
                <a href="/" rel="home"><div id="hd-logo" role="image" aria-label="YUI logo"></div></a>
                
                
            </div>

            <div class="yui3-u-1-4">
                <ul id="userinfo">

    <li><a href="/forum/ucp.php?mode=register">Register</a></li>
    <li><a href="/forum/ucp.php?mode=login&amp;redirect=/yui/docs/datatable-deprecated/datatable-dsget.html">Log in</a></li>

</ul>

                <form id="main-search" class="search" action="http://search.yahoo.com/search"
        method="get" role="search">

    <input type="search" class="search-input" name="q"
            aria-label="Search docs and APIs"
            placeholder="Search docs and APIs">

    <input type="hidden" name="vs" value="yuilibrary.com">
    <input type="hidden" name="vs" value="yuiblog.com">
</form>

            </div>

            <div id="main-nav" class="yui3-u"><nav>
    <ul class="nav hoverable-group">
        
            <li class="nav-tab hoverable ">
                <a href="/">Home</a>
                
            </li>
        
            <li class="nav-tab hoverable ">
                <a href="/yui/quick-start/">Quick Start</a>
                
                    <ul class="nav-submenu">
                        
                            <li class="nav-child ">
                                
                                    <a href="/yui/configurator/">Configurator</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/download/yui3/">Download YUI 3</a>
                                
                            </li>
                        
                    </ul>
                
            </li>
        
            <li class="nav-tab hoverable  nav-tab-active">
                <a href="/yui/docs/">Documentation</a>
                
                    <ul class="nav-submenu">
                        
                            <li class="nav-child ">
                                
                                    <a href="/yui/docs/guides/">User Guides</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/yui/docs/examples/">Examples</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/yui/docs/api/">API Docs</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/yui/environments/">Environments</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/yui/docs/tutorials/">Tutorials</a>
                                
                            </li>
                        
                    </ul>
                
            </li>
        
            <li class="nav-tab hoverable nav-break">
                <a href="/community/">Community</a>
                
                    <ul class="nav-submenu">
                        
                            <li class="nav-child ">
                                
                                    <a href="/gallery/">Gallery</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="http://yuiblog.com/">Blog</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/forum/">Forums</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/theater/">YUI Theater</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/projects/yui3/calendar/">Calendar</a>
                                
                            </li>
                        
                    </ul>
                
            </li>
        
            <li class="nav-tab hoverable ">
                <a href="/contribute/">Contribute</a>
                
                    <ul class="nav-submenu">
                        
                            <li class="nav-child ">
                                
                                    <a href="https://github.com/yui/" target="_blank" title="External link">YUI on GitHub &#187;</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/projects/yui3/newticket/">File a Ticket</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/projects/yui3/report/">View Tickets</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/projects/yui3/dashboard/">Dashboard</a>
                                
                            </li>
                        
                    </ul>
                
            </li>
        
            <li class="nav-tab hoverable ">
                <a href="/projects/">Other Projects</a>
                
                    <ul class="nav-submenu">
                        
                            <li class="nav-child ">
                                
                                    <a href="http://yui.github.com/shifter/" target="_blank" title="External link">Shifter &#187;</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="http://yui.github.com/yogi/" target="_blank" title="External link">Yogi &#187;</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/projects/yui2/">YUI 2</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="http://yui.github.com/yuidoc/" target="_blank" title="External link">YUI Doc &#187;</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/projects/yuitest/">YUI Test</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/projects/yuilibrary/">YUI Website</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="http://yui.github.com/yuicompressor/" target="_blank" title="External link">YUI Compressor &#187;</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="http://github.com/yui/builder" target="_blank" title="External link">YUI Builder &#187;</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/projects/phploader/">YUI PHP Loader</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="http://yui.github.com/gridbuilder/" target="_blank" title="External link">Grid Builder &#187;</a>
                                
                            </li>
                        
                    </ul>
                
            </li>
        
    </ul>
</nav></div>

        </div>
    </header></div>

    <div id="bd" class="clearfix yui3-g">
        
    <div id="breadcrumbs" class="yui3-u-1">
        <ul class="breadcrumbs">
            
                <li class="crumb"><a href="/yui/docs/">YUI</a></li>
                
                    <li class="separator">&gt;</li>
                
            
                <li class="crumb"><a href="/yui/widgets/">Widgets</a></li>
                
                    <li class="separator">&gt;</li>
                
            
                <li class="crumb"><a href="/yui/docs/datatable-deprecated/">DataTable (deprecated version)</a></li>
                
                    <li class="separator">&gt;</li>
                
            
                <li class="crumb"><a href="/yui/docs/datatable-deprecated/datatable-dsget.html">Example: DataTable + DataSource.Get + JSON Data</a></li>
                
            
        </ul>
    </div>


        
    
        <div class="project-version yui3-u">Version 3.8.0</div>
    



        

        
            
    


            




<div class="yui3-u-1">
    <div id="docs-hd" class="content">
        <h1>Example: DataTable + DataSource.Get + JSON Data</h1>

        
    </div>
</div>

<div class="yui3-u-3-4 print-max-width">
    <div id="docs-main" class="content">
        <style scoped>
/* custom styles for this example */
.dt-example {margin:1em;}

/* css to counter global site css */
.dt-example th {text-transform:none;}
.dt-example table {width:auto;}
.dt-example caption {display:table-caption;}
.notice {
    background: #faf3d1;
    border: 1px solid #eac9a9;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    border-radius: px;
    padding: 0 1em;
    -moz-box-shadow: 0 0 5px #ccc8b3;
    -webkit-box-shadow: 0 0 5px #ccc8b3;
    box-shadow: 0 0 5px #ccc8b3;
    margin-bottom: 1em;
}
</style>

<div class="notice">
    <p>
        <strong>NOTICE</strong>: This example is for the <strong>deprecated
        version of DataTable</strong>.  The components referred to here will be
        removed in future versions of YUI</strong>.  If you are unable to
        upgrade to <a href="../datatable/index.html">the latest DataTable
        version</a> due to unresolvable feature conflicts from version 3.4.1 or
        prior, please <a href="../../../projects/yui3/newticket/">file a
        ticket</a>.
    </p>
</div>

<div class="intro">
    <p>This example shows how to populate a DataTable with data from the Yahoo! Local webservice retrieved via a YQL query. First we create a DataSource.Get instance pointing to YQL, then using the DataTableDataSource plugin we can load data for pizza places near our office.</p>

    <p>In this example, we render the DataTable first, then load data into it in a separate call.</p>
</div>

<div class="example yui3-skin-sam">
    <div id="pizza" class="yui3-skin-sam dt-example"></div>

<script>
YUI().use("datasource-get", "datasource-jsonschema", "datatable-base-deprecated", "datatable-datasource-deprecated", function (Y) {

    var url = "http://query.yahooapis.com/v1/public/yql?format=json" +
                  "&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys",
        query = "&q=" + encodeURIComponent(
            'select * from local.search ' +
            'where zip = "94089" and query = "pizza"'),
        dataSource,
        table;

    dataSource = new Y.DataSource.Get({ source: url });

    dataSource.plug(Y.Plugin.DataSourceJSONSchema, {
        schema: {
            resultListLocator: "query.results.Result",
            resultFields: [
                "Title",
                "Phone",
                {
                    key: "Rating.AverageRating",
                    // YQL is returning "NaN" for unrated restaurants
                    parser: function (val) {
                        return isNaN(val) ? '(none)' : val;
                    }
                }
            ]
        }
    });

    table = new Y.DataTable.Base({
        columnset: [
            "Title",
            "Phone",
            { key:"Rating.AverageRating", label:"Rating" }
        ],
        summary: "Pizza places near 98089",
        caption: "Table with JSON data from YQL"
    });
    
    table.plug(Y.Plugin.DataTableDataSource, { datasource: dataSource });

    table.render("#pizza");

    table.datasource.load({ request: query });
});
</script>

</div>

<h2>Populating Your DataTable with Remote Data Using DataSource.Get</h2>

<p>Your table can be easily popluated with remote JSON data from a JSONP webservice by creating a DataSource instance and using the DataTableDataSource plugin to load the data into a DataTable.</p>

<p>Start with the <code>use()</code> statement:</p>

<pre class="code prettyprint">YUI().use(&quot;datasource-get&quot;, &quot;datasource-jsonschema&quot;, &quot;datatable-datasource-deprecated&quot;, function(Y) {
});</pre>


<p>Next create a DataSource.Get instance pointing to YQL. The <a href="http://developer.yahoo.com/yql/console/">YQL Console</a> makes it easy to determine the REST URL we want to send. You also need to define the correct schema for the DataSourceJSONSchema plugin. This is a good time to call <code>sendRequest</code> to make sure the data returns as expected.</p>

<pre class="code prettyprint">var dataSource = new Y.DataSource.Get({
    source: &quot;http:&#x2F;&#x2F;query.yahooapis.com&#x2F;v1&#x2F;public&#x2F;yql?&quot;+
        &quot;q=select%20*%20from%20local.search%20where%20zip%3D%2794089%27%20&quot;+
        &quot;and%20query%3D%27pizza%27&amp;format=json&amp;&quot;+
        &quot;env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&quot;
});

dataSource.plug(Y.Plugin.DataSourceJSONSchema, {
    schema: {
        resultListLocator: &quot;query.results.Result&quot;,
        resultFields: [&quot;Title&quot;, &quot;Phone&quot;, &quot;Rating.AverageRating&quot;]
    }
});

dataSource.sendRequest({
    callback: {
        success: function(e) {
            Y.log(e);
        }
    }
});</pre>


<p>Now that the DataSource is created properly, define the columns that you want your table to show. These columns map directly to the parameter names returned in the data.</p>

<pre class="code prettyprint">var cols = [
    &quot;Title&quot;,
    &quot;Phone&quot;,
    { key: &quot;Rating.AverageRating&quot;, label: &quot;Rating&quot; }
];</pre>


<p>Now you are ready to create a DataTable using the columns you have defined. When you plug the instance with the DataTableDataSource plugin, point to your DataSource instance. After you render the table, load the data via the plugin.</p>

<pre class="code prettyprint">var table = new Y.DataTable.Base({
    columnset: cols,
    summary:&quot;Pizza places near 98089&quot;,
    caption:&quot;Table with JSON data from YQL&quot;
});

table.plug(Y.Plugin.DataTableDataSource, {
    datasource: dataSource
}).render(&quot;#pizza&quot;);

table.datasource.load();</pre>


<p>One final change you can make is to split the URL between the DataSource <code>source</code> value and the <code>request</code> value sent to the DataTableDataSource plugin. Splitting the URL this way facilitates making future requests to the same DataSource.  You can see this in the <a href="#fullcode">Full Code Listing</a> below.</p>

<h2 id="fullcode">Full Code Listing</h2>

<pre class="code prettyprint">&lt;div id=&quot;pizza&quot; class=&quot;yui3-skin-sam dt-example&quot;&gt;&lt;&#x2F;div&gt;

&lt;script&gt;
YUI().use(&quot;datasource-get&quot;, &quot;datasource-jsonschema&quot;, &quot;datatable-base-deprecated&quot;, &quot;datatable-datasource-deprecated&quot;, function (Y) {

var url = &quot;http:&#x2F;&#x2F;query.yahooapis.com&#x2F;v1&#x2F;public&#x2F;yql?format=json&quot; +
              &quot;&amp;env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&quot;,
    query = &quot;&amp;q=&quot; + encodeURIComponent(
        &#x27;select * from local.search &#x27; +
        &#x27;where zip = &quot;94089&quot; and query = &quot;pizza&quot;&#x27;),
    dataSource,
    table;

dataSource = new Y.DataSource.Get({ source: url });

dataSource.plug(Y.Plugin.DataSourceJSONSchema, {
    schema: {
        resultListLocator: &quot;query.results.Result&quot;,
        resultFields: [
            &quot;Title&quot;,
            &quot;Phone&quot;,
            {
                key: &quot;Rating.AverageRating&quot;,
                &#x2F;&#x2F; YQL is returning &quot;NaN&quot; for unrated restaurants
                parser: function (val) {
                    return isNaN(val) ? &#x27;(none)&#x27; : val;
                }
            }
        ]
    }
});

table = new Y.DataTable.Base({
    columnset: [
        &quot;Title&quot;,
        &quot;Phone&quot;,
        { key:&quot;Rating.AverageRating&quot;, label:&quot;Rating&quot; }
    ],
    summary: &quot;Pizza places near 98089&quot;,
    caption: &quot;Table with JSON data from YQL&quot;
});

table.plug(Y.Plugin.DataTableDataSource, { datasource: dataSource });

table.render(&quot;#pizza&quot;);

table.datasource.load({ request: query });
});
&lt;&#x2F;script&gt;</pre>



    </div>
</div>

<div class="yui3-u-1-4">
    <div id="docs-sidebar" class="sidebar">
        
            
        

        

        
            
                <div class="sidebox">
                    <div class="hd">
                        <h2 class="no-toc">Examples</h2>
                    </div>

                    <div class="bd">
                        <ul class="examples">
                            
                                
                                    <li data-description="This example illustrates simple DataTable use cases.">
                                        <a href="datatable-basic.html">Basic DataTable</a>
                                    </li>
                                
                            
                                
                                    <li data-description="DataTable loaded with JSON data from a remote webservice via DataSource.Get">
                                        <a href="datatable-dsget.html">DataTable + DataSource.Get + JSON Data</a>
                                    </li>
                                
                            
                                
                                    <li data-description="DataTable loaded with XML data from a remote webservice via DataSource.IO.">
                                        <a href="datatable-dsio.html">DataTable + DataSource.IO + XML Data</a>
                                    </li>
                                
                            
                                
                                    <li data-description="Custom format data for display.">
                                        <a href="datatable-formatting.html">Formatting Row Data for Display</a>
                                    </li>
                                
                            
                                
                                    <li data-description="DataTable with nested column headers.">
                                        <a href="datatable-nestedcols.html">Nested Column Headers</a>
                                    </li>
                                
                            
                                
                                    <li data-description="DataTable with column sorting.">
                                        <a href="datatable-sort.html">Column Sorting</a>
                                    </li>
                                
                            
                                
                                    <li data-description="DataTable with vertical and/or horizontal scrolling rows.">
                                        <a href="datatable-scroll.html">Scrolling DataTable</a>
                                    </li>
                                
                            
                        </ul>
                    </div>
                </div>
            
        

        
    </div>
</div>




        
    </div>

    <div id="ft"><footer>
        <p class="copyright">
        &copy; 2006-2013 Yahoo! Inc. All rights reserved.<br>
        All code on this site is licensed under the <a href="/license/">BSD License</a> unless stated otherwise.<br>
        <span class="links"><a href="/about/">About This Site</a> &middot; <a href="/security/">Security Contact Info</a></span>
        </p>
    </footer></div>
</div>






    <script src="/combo/js-search-min.js-hoverable-min.js-main-min.js"></script>



    <script src="/vendor/prettify/prettify-min.js"></script>
    <script>prettyPrint();</script>



    <script>
    (function() {
        var ga = document.createElement('script'); ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    }());

    (function() {
        var ya = document.createElement('script'); ya.async = true;
        ya.src = ('https:' == document.location.protocol ? 'https://s' : 'http://d') + '.yimg.com/mi/ywa.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ya, s);

        window.onload = function () {
            try {
                var YWATracker = YWA.getTracker("10001393677061", "US");
                YWATracker.submit();
            } catch (eYWATCUnavailable) {
                if (window.console && window.console.warn) {
                    window.console.warn(eYWATCUnavailable.message || "Unknown error");
                }
            }
        };
    }());
    </script>




</body>
</html>
