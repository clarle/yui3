<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Example: DataSchema.XML for HTML Tables - YUI Library</title>

    <meta name="viewport" content="width=960" id="meta-viewport">
    <script>
    if (screen.width < 768) {
        document.getElementById('meta-viewport').setAttribute('content', 'width=768');
    }
    </script>

    
    
    





    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic,700italic">

    <link rel="stylesheet" href="https://yui-s.yahooapis.com/3.9.0/build/cssgrids/cssgrids-min.css">


    <link rel="stylesheet" href="/combo/css-main-min.css">



    <link rel="stylesheet" href="/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="/css/docs-min.css">




<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
<meta http-equiv="X-XRDS-Location" content="/xrds.xml">

    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@yuilibrary">
    <meta name="twitter:creator" content="@yuilibrary">
    <meta name="twitter:url" content="http://yuilibrary.com/yui/docs/dataschema/dataschema-table.html">
    <meta name="twitter:title" content="Example: DataSchema.XML for HTML Tables">
    <meta name="twitter:description" content="Schema parsing data held in TABLE elements.">
    

<link rel="shortcut icon" type="image/png" href="/img/favicon.png">




    

    <script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-29453705-2']);
    _gaq.push(['_trackPageview']);
    </script>



    

    
        <script>
        var YUI_config={"filter":"min","maxURLLength":1024,"root":"3.17.2/","groups":{"site":{"combine":true,"comboBase":"/combo/js?","root":"","modules":{"hoverable":{"path":"hoverable-min.js","requires":["event-hover","node-base","node-event-delegate"]},"search":{"path":"search-min.js","requires":["autocomplete","autocomplete-highlighters","node-pluginhost"]},"api-filter":{"path":"apidocs/api-filter-min.js","requires":["autocomplete-base","autocomplete-highlighters","autocomplete-sources"]},"api-list":{"path":"apidocs/api-list-min.js","requires":["api-filter","api-search","event-key","node-focusmanager","tabview"]},"api-search":{"path":"apidocs/api-search-min.js","requires":["autocomplete-base","autocomplete-highlighters","autocomplete-sources","escape"]}}}}};
        if (location.protocol.indexOf('https') > -1) {
            YUI_config.comboBase = 'https://yui-s.yahooapis.com/combo?';
            YUI_config.combine = true;
        }
        </script>
    

    
        <script src="https://yui-s.yahooapis.com/3.17.2/build/yui/yui-min.js"></script>
    


</head>
<body class="yui3-skin-sam">

<!--
<a href="/yuiconf/" class="yuiconf ribbon">
    <img src="/img/yuiconf/2013/ribbon.png" alt="YUIConf 2013" width="139" height="139">
</a>
-->

<div id="doc">
    <div id="hd" class="yui3-g"><header>
        <div class="content">
            <div class="yui3-u-3-4">
                <a href="/" rel="home"><div id="hd-logo" role="image" aria-label="YUI logo"></div></a>
                
                
            </div>

            <div class="yui3-u-1-4">
                <form id="main-search" class="search" action="http://search.yahoo.com/search"
        method="get" role="search">

    <input type="search" class="search-input" name="q"
            aria-label="Search docs and APIs"
            placeholder="Search docs and APIs">

    <input type="hidden" name="vs" value="yuilibrary.com">
    <input type="hidden" name="vs" value="yuiblog.com">
</form>

            </div>

            <div id="main-nav" class="yui3-u"><nav>
    <ul class="nav hoverable-group">
        
            <li class="nav-tab hoverable ">
                <a href="/">Home</a>
                
            </li>
        
            <li class="nav-tab hoverable ">
                <a href="/yui/quick-start/">Quick Start</a>
                
                    <ul class="nav-submenu">
                        
                            <li class="nav-child ">
                                
                                    <a href="/yui/configurator/">Configurator</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/download/yui3/">Download YUI 3</a>
                                
                            </li>
                        
                    </ul>
                
            </li>
        
            <li class="nav-tab hoverable  nav-tab-active">
                <a href="/yui/docs/">Documentation</a>
                
                    <ul class="nav-submenu">
                        
                            <li class="nav-child ">
                                
                                    <a href="/yui/docs/guides/">User Guides</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/yui/docs/examples/">Examples</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/yui/docs/api/">API Docs</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/yui/environments/">Environments</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/yui/docs/tutorials/">Tutorials</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/yui/docs/tutorials/faq/">FAQ</a>
                                
                            </li>
                        
                    </ul>
                
            </li>
        
            <li class="nav-tab hoverable nav-break">
                <a href="/community/">Community</a>
                
                    <ul class="nav-submenu">
                        
                            <li class="nav-child ">
                                
                                    <a href="/gallery/">Gallery</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="http://yuiblog.com/">Blog</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/forum/">Forums</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/theater/">YUI Theater</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="https://github.com/yui/yui3/wiki/Development-Schedule" target="_blank" title="External link">Calendar &#187;</a>
                                
                            </li>
                        
                    </ul>
                
            </li>
        
            <li class="nav-tab hoverable ">
                <a href="/contribute/">Contribute</a>
                
                    <ul class="nav-submenu">
                        
                            <li class="nav-child ">
                                
                                    <a href="https://github.com/yui/" target="_blank" title="External link">YUI on GitHub &#187;</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/projects/yui3/newticket/">File a Ticket</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/projects/yui3/report/">View Tickets</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/projects/yui3/dashboard/">Dashboard</a>
                                
                            </li>
                        
                    </ul>
                
            </li>
        
            <li class="nav-tab hoverable ">
                <a href="/projects/">Other Projects</a>
                
                    <ul class="nav-submenu">
                        
                            <li class="nav-child ">
                                
                                    <a href="http://yui.github.com/shifter/" target="_blank" title="External link">Shifter &#187;</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="http://yui.github.com/yogi/" target="_blank" title="External link">Yogi &#187;</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/projects/yui2/">YUI 2</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="http://yui.github.com/yuidoc/" target="_blank" title="External link">YUI Doc &#187;</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/projects/yuitest/">YUI Test</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/projects/yuilibrary/">YUI Website</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="http://yui.github.com/yuicompressor/" target="_blank" title="External link">YUI Compressor &#187;</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="http://github.com/yui/builder" target="_blank" title="External link">YUI Builder &#187;</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="/projects/phploader/">YUI PHP Loader</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="http://yui.github.com/gridbuilder/" target="_blank" title="External link">Grid Builder &#187;</a>
                                
                            </li>
                        
                            <li class="nav-child ">
                                
                                    <a href="http://yui.github.com/skinbuilder/" target="_blank" title="External link">Skin Builder &#187;</a>
                                
                            </li>
                        
                    </ul>
                
            </li>
        
    </ul>
</nav></div>

        </div>
    </header></div>

    <div id="bd" class="clearfix yui3-g">
        
    <div id="breadcrumbs" class="yui3-u-1">
        <ul class="breadcrumbs">
            
                <li class="crumb"><a href="/yui/docs/">YUI</a></li>
                
                    <li class="separator">&gt;</li>
                
            
                <li class="crumb"><a href="/yui/utilities/">Utilities</a></li>
                
                    <li class="separator">&gt;</li>
                
            
                <li class="crumb"><a href="/yui/docs/dataschema/">DataSchema</a></li>
                
                    <li class="separator">&gt;</li>
                
            
                <li class="crumb"><a href="/yui/docs/dataschema/dataschema-table.html">Example: DataSchema.XML for HTML Tables</a></li>
                
            
        </ul>
    </div>


        
    
        <div class="project-version yui3-u">Version 3.17.2</div>
    



        

        
            
    


            




    



<div class="yui3-u-1">
    <div id="docs-hd" class="content">
        <h1>Example: DataSchema.XML for HTML Tables</h1>

        
    </div>
</div>

<div class="yui3-u-3-4 print-max-width">
    <div id="docs-main" class="content">
        <div class="intro">
    <p>DataSchema.XML can be used to retrieve data held in HTML TABLE elements.</p>
</div>

<div class="example yui3-skin-sam">
    <style>
/* custom styles for this example */
#demo .output {margin-bottom:1em; padding:10px; border:1px solid #D9D9D9;}
#complex tbody, #complex thead {
    border:3px solid #CCC;
}
</style>

<form id="demo">
    <h4>Simple Table</h4>
    <h6>Data</h6>

    <table id="simple">
    <tr>
        <td>coffee</td>
        <td>1.25</td>
    </tr>
    <tr>
        <td>juice</td>
        <td>2.00</td>
    </tr>
    <tr>
        <td>tea</td>
        <td>1.25</td>
    </tr>
    <tr>
        <td>soda</td>
        <td>1.00</td>
    </tr>
    </table>

    
    <h6>Schema</h6>
    <pre>
{
    // Each record is held in a TR
    resultListLocator: "tr",
    // Note that the XPath indexes are 1-based!
    resultFields: [{key:"beverage", locator:"td[1]"}, {key:"price", locator:"td[2]"}]
}
    </pre>

    <h6>Normalized data</h6>
    <input type="button" id="demo_apply_basic" value="Apply schema =>">
    <div id="demo_output_basic" class="output"></div>

    <h4>Complex table</h4>
    <h6>Data</h6>

    <table id="complex">
    <thead>
        <tr>
            <th>item</th>
            <th>price</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>hamburger</td>
            <td>4.00</td>
        </tr>
        <tr>
            <td>cheeseburger</td>
            <td>4.50</td>
        </tr>
        <tr>
            <td>veggie burger</td>
            <td>4.00</td>
        </tr>
        <tr>
            <td>salmon burger</td>
            <td>5.00</td>
        </tr>
    </tbody>
    <tbody>
        <tr>
            <td>french fries</td>
            <td>1.50</td>
        </tr>
        <tr>
            <td>onion rings</td>
            <td>2.00</td>
        </tr>
        <tr>
            <td>fruit salad</td>
            <td>2.50</td>
        </tr>
        <tr>
            <td>side salad</td>
            <td>2.00</td>
        </tr>
    </tbody>
    <tbody>
        <tr>
            <td>coffee</td>
            <td>1.25</td>
        </tr>
        <tr>
            <td>juice</td>
            <td>2.00</td>
        </tr>
        <tr>
            <td>tea</td>
            <td>1.25</td>
        </tr>
        <tr>
            <td>soda</td>
            <td>1.00</td>
        </tr>
    </tbody>
    </table>

    <h6>Schema</h6>
    <pre>
// This schema is dynamically generated
{
    // Each record is held in a TR
    resultListLocator: "tr",
    // Note that the XPath indexes are 1-based!
    resultFields: [{key:"beverage", locator:"td[1]"}, {key:"price", locator:"td[2]"}]
}
    </pre>

    <h6>Normalized data</h6>
    <input type="button" id="demo_apply_complex" value="Apply schema =>">
    <div id="demo_output_complex" class="output"></div>
</form>


<script>
YUI().use("dump", "node", "datatype-xml", "dataschema-xml", function (Y) {
    Y.on("click", function(e){
        var tableEl = Y.Node.getDOMNode(Y.one("#simple")),
            schema = {
                // Each record is held in a TR
                resultListLocator: "tr",
                // Note that the XPath indexes are 1-based!
                resultFields: [{key:"beverage", locator:"td[1]"}, {key:"price", locator:"td[2]"}]
            };
        Y.one("#demo_output_basic").setHTML(Y.dump(Y.DataSchema.XML.apply(schema, tableEl)));
    }, "#demo_apply_basic");


    Y.on("click", function(e){
        // This function generates a schema based on contents of a TABLE element
        var getSchemaFromTableNode = function(tableNode) {
            var fields = [],
                // Each record is held in a TR
                schema = {resultListLocator:"tr"},
                // Each field name is held in a TH
                thList = tableNode.all("th");
                
            // Generate field definitions based on TH
            thList.each(function(thNode, i){
                // Note that the XPath indexes are 1-based!
                fields.push({key:thNode.get("text"), locator:"td["+(i+1)+"]"});
            });
            schema.resultFields = fields;
            return schema;
        };
        
        var tableNode = Y.one("#complex"),
            // Generate schema dynamically
            schema = getSchemaFromTableNode(tableNode),
            // Create a temporary TBODY container to hold all data TRs
            tbody = document.createElement("tbody"),
            tbodyContainer = document.createDocumentFragment().appendChild(tbody);

        // Grab each TR in a TBODY but don't include TRs from the THEAD
        Y.all("#complex tbody tr").each(function(trNode, i){
            // Cloning the TR keeps it in the document (optional)
            // Append each TR to the container
            tbodyContainer.appendChild(Y.Node.getDOMNode(trNode).cloneNode(true));
        })

        Y.one("#demo_output_complex").setHTML(Y.dump(Y.DataSchema.XML.apply(schema, tbodyContainer)));
    }, "#demo_apply_complex");
});
</script>

</div>

<p>DataSource.XML's <code>apply()</code> method supports passing in DOM nodes or document fragments. Use XPath strings to define data locations. In this example, we are retrieving data held in the rows of a TABLE element.</p>

<pre class="code prettyprint">YUI().use(&quot;dataschema-xml&quot;, function(Y) {
    var tableEl = Y.Node.getDOMNode(Y.one(&quot;#simple&quot;)),
        schema = {
            &#x2F;&#x2F; Each record is held in a TR
            resultListLocator: &quot;tr&quot;,
            &#x2F;&#x2F; Note that the XPath indexes are 1-based!
            resultFields: [
                {key:&quot;beverage&quot;, locator:&quot;td[1]&quot;},
                {key:&quot;price&quot;, locator:&quot;td[2]&quot;}
            ]
        },
        data_out = Y.DataSchema.XML.apply(schema, tableEl);

    alert(data_out);
});</pre>


<p>If the table has a THEAD element and/or multiple TBODY elements, special considerations must be taken to apply the schema to the appropriate collection of TR elements. In the following complex example we leverage the power of the Node API to</p>

<ul>
    <li>Access the contents of the THEAD to generate our schema dynamically;</li>
    <li>and access only the TR elements contained in TBODY elements for data values, ignoring those TR elements in the THEAD.</li>
</ul>

<pre class="code prettyprint">YUI().use(&quot;dataschema-xml&quot;, function(Y) {
    &#x2F;&#x2F; This function generates a schema based on contents of a TABLE element
    var getSchemaFromTableNode = function(tableNode) {
        var fields = [],
            &#x2F;&#x2F; Each record is held in a TR
            schema = {resultListLocator:&quot;tr&quot;},
            &#x2F;&#x2F; Each field name is held in a TH
            thList = tableNode.all(&quot;th&quot;);

        &#x2F;&#x2F; Generate field definitions based on TH
        thList.each(function(thNode, i){
            &#x2F;&#x2F; Note that the XPath indexes are 1-based!
            fields.push({key:thNode.get(&quot;text&quot;), locator:&quot;td[&quot;+(i+1)+&quot;]&quot;});
        });
        schema.resultFields = fields;
        return schema;
    };

    var tableNode = Y.one(&quot;#complex&quot;),
        &#x2F;&#x2F; Generate schema dynamically
        schema = getSchemaFromTableNode(tableNode),
        &#x2F;&#x2F; Create a temporary TBODY container to hold all data TRs
        tbody = document.createElement(&quot;tbody&quot;),
        tbodyContainer = document.createDocumentFragment().appendChild(tbody);

    &#x2F;&#x2F; Grab each TR in a TBODY but don&#x27;t include TRs from the THEAD
    Y.all(&quot;#complex tbody tr&quot;).each(function(trNode, i){
        &#x2F;&#x2F; Cloning the TR keeps it in the document (optional)
        &#x2F;&#x2F; Append each TR to the container
        tbodyContainer.appendChild(Y.Node.getDOMNode(trNode).cloneNode(true));
    })

    var data_out = Y.DataSchema.XML.apply(schema, tbodyContainer);

    alert(data_out);
});</pre>


    </div>
</div>

<div class="yui3-u-1-4">
    <div id="docs-sidebar" class="sidebar">
        
            
        

        

        
            
                <div class="sidebox">
                    <div class="hd">
                        <h2 class="no-toc">Examples</h2>
                    </div>

                    <div class="bd">
                        <ul class="examples">
                            
                                
                                    <li data-description="Schema parsing a JavaScript array.">
                                        <a href="dataschema-array.html">DataSchema.Array</a>
                                    </li>
                                
                            
                                
                                    <li data-description="Schema parsing JSON data.">
                                        <a href="dataschema-json.html">DataSchema.JSON</a>
                                    </li>
                                
                            
                                
                                    <li data-description="Schema parsing XML data.">
                                        <a href="dataschema-xml.html">DataSchema.XML for XML Data</a>
                                    </li>
                                
                            
                                
                                    <li data-description="Schema parsing data held in TABLE elements.">
                                        <a href="dataschema-table.html">DataSchema.XML for HTML Tables</a>
                                    </li>
                                
                            
                                
                                    <li data-description="Schema parsing delimited plain-text data.">
                                        <a href="dataschema-text.html">DataSchema.Text</a>
                                    </li>
                                
                            
                                
                                    <li data-description="Parsing data into specified types as the schema is being applied.">
                                        <a href="dataschema-parsing.html">Enforcing DataTypes</a>
                                    </li>
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                        </ul>
                    </div>
                </div>
            
        

        
            
                <div class="sidebox">
                    <div class="hd">
                        <h2 class="no-toc">Related Examples</h2>
                    </div>

                    <div class="bd">
                        <ul class="examples">
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                            
                                
                                    <li data-description="The Local DataSource manages retrieval of in-page data, from JavaScript arrays and objects to DOM elements.">
                                        <a href="../datasource/datasource-local.html">DataSource.Local</a>
                                    </li>
                                
                            
                                
                                    <li data-description="The Get DataSource, which manages retrieval of data from remote sources via the Get Utility, can be useful for accessing data from cross-domain servers without the need for a proxy.">
                                        <a href="../datasource/datasource-get.html">DataSource.Get</a>
                                    </li>
                                
                            
                                
                                    <li data-description="The IO DataSource manages retrieval of data from remote sources, via the IO Utility.">
                                        <a href="../datasource/datasource-io.html">DataSource.IO</a>
                                    </li>
                                
                            
                                
                                    <li data-description="The Function DataSource, which manages retrieval of data from a JavaScript function, provides a highly customizeable mechanism for implementer-defined data retrieval algorithms">
                                        <a href="../datasource/datasource-function.html">DataSource.Function</a>
                                    </li>
                                
                            
                                
                                    <li data-description="Use the DataSourceCache plugin to enable caching and reduce server calls to remote sources.">
                                        <a href="../datasource/datasource-caching.html">DataSource with Caching</a>
                                    </li>
                                
                            
                                
                                    <li data-description="The DataSourceCache plugin supports offline caching so that cached data persists across browser sessions.">
                                        <a href="../datasource/datasource-offlinecache.html">DataSource with Offline Cache</a>
                                    </li>
                                
                            
                        </ul>
                    </div>
                </div>
            
        
    </div>
</div>




        
    </div>

    <div id="ft"><footer>
        <p class="copyright">
        All code on this site is licensed under the <a href="/license/">BSD License</a> unless stated otherwise.<br>
        <span class="links"><a href="/about/">About This Site</a> &middot; <a href="/security/">Security Contact Info</a></span>
        </p>
    </footer></div>
</div>






    <script src="/combo/js-search-min.js-hoverable-min.js-main-min.js"></script>



    <script src="/vendor/prettify/prettify-min.js"></script>
    <script>prettyPrint();</script>



    <script>
    (function() {
        var ga = document.createElement('script'); ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    }());

    (function() {
        var ya = document.createElement('script'); ya.async = true;
        ya.src = ('https:' == document.location.protocol ? 'https://s' : 'http://d') + '.yimg.com/mi/ywa.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ya, s);

        window.onload = function () {
            try {
                var YWATracker = YWA.getTracker("10001393677061", "US");
                YWATracker.submit();
            } catch (eYWATCUnavailable) {
                if (window.console && window.console.warn) {
                    window.console.warn(eYWATCUnavailable.message || "Unknown error");
                }
            }
        };
    }());
    </script>




</body>
</html>
