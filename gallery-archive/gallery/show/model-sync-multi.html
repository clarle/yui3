<html>
	<head>
		<title>YUI Library - Gallery :: Multiple Model Sync</title>
		<link href="https://github.com/solmsted" rel="author" title="solmsted" />
		<meta charset="utf-8" />
		<link href="http://yui.yahooapis.com/combo?2.8.2/build/reset-fonts-grids/reset-fonts-grids.css" rel="stylesheet" />
		<link href="../../assets/skin/yuilib-08.25.2011.css" rel="stylesheet" />
		<link href="http://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic,700italic" rel="stylesheet" />
		<link href="http://yui.yahooapis.com/3.9.0/build/cssgrids/cssgrids-min.css" rel="stylesheet" />
		<link href="../../combo/css@main-min.css" rel="stylesheet" />
		<meta content="IE=Edge,chrome=1" http-equiv="X-UA-Compatible" />
		<meta content="/xrds.xml" http-equiv="X-XRDS-Location" />
		<link href="../../img/favicon.png" rel="shortcut icon" type="image/png" />
	</head>
	<body class="yui3-skin-sam">
		<div id="wrap">
			<div class="yui-t2 gallery" id="doc3"><a name="top"></a><div class="yui3-g" id="hd">
					<ul class="gallery-header-links">
						<li><a href="http://www.yuilibrary.com">YUI Home</a><li><a href="../index.html">Gallery Archive</a></ul>
					<div class="content">
						<div class="yui3-u-1-4">
							<ul id="userinfo">
							</ul>
						</div>
					</div>
				</div>
				<div id="bd">
					<div class="yui3-u-1" id="breadcrumbs">
						<ul class="breadcrumbs">
							<li class="crumb"><a href="http://yuilibrary.com/">YUI</a><li class="separator">&gt;<li class="crumb"><a href="http://yuilibrary.com/community/">Community</a><li class="separator">&gt;<li class="crumb"><a href="../index.html">Gallery</a></ul>
					</div>
					<div class="content" id="docs-hd">
						<h1>Gallery</h1>
					</div>
					<div id="deprecated">
						<p>The Gallery is deprecated. No new Gallery components may be submitted, and modifying existing components is disabled. For more information please read the <a href="http://www.yuiblog.com/blog/2014/06/16/yui-gallery-deprecation-announcement/">Gallery Deprecation blog post</a>. This is a static snapshot of the Gallery for archive purposes. </div>
					<div id="content-wrap">
						<div class="yui-b">
							<div class="sidenav">
								<div class="sidebox">
									<div class="hd">
										<h2>Modules</h2>
									</div>
									<div class="bd">
										<ul class="blank">
											<li><img src="../../assets/home.png" /> <a href="../index.html">Home</a><li><img src="../../assets/gallery/star.png" /> <a href="../featured.html">Featured</a><li><img src="../../assets/gallery/thumb_up.png" /> <a href="../popular.html">Popular</a><li><img src="../../assets/gallery/greenled.png" /> <a href="../new.html">New</a><li><img src="../../assets/gallery/script_code_red.png" /> <a href="../show.html">All</a></ul>
									</div>
								</div>
								<div class="sidebox">
									<div class="hd">
										<h2>Documentation</h2>
									</div>
									<div class="bd">
										<ul class="blank">
											<li><img src="../../assets/script.png" /> <a href="http://yui.github.com/yogi/">Yogi Documentation</a><li><img src="../../assets/notepaper.png" /> <a href="http://yui.github.com/shifter/">Shifter Documentation</a><li><img src="../../assets/gallery/book.png" /> <a href="http://yuilibrary.com/yui/docs/tutorials/gallery">Developer Guide</a><li><img src="../../assets/gear.png" /> <a href="../setup.html">Module Setup</a></ul>
									</div>
								</div>
							</div>
						</div>
						<div id="yui-main">
							<div class="yui-b" id="gallery">
								<div class="yui-g">
									<div class="nav" id="ctxtnav">
										<h2>Context Navigation</h2>
										<ul>
										</ul>
									</div>
									<div class="warning"> YUI Library is not responsible for bugs or support with this module. It is available as a free service. For support please contact the module owner with the provided links. </div>
									<div class="gallery-item" id="gallery-item_678">
										<div class="item-hd">
											<h2>Multiple Model Sync (gallery-model-sync-multi) <span class="oncdn" title="This module is available on the CDN.">on cdn</span></h2> Last Updated: <span title="12 Oct 2012 18:58">10/12/12</span><div class="votes"><a class="up" href="#" title="Vote this item up.">+</a> <span>0</span> <a class="down" href="#" title="Vote this item down.">-</a></div>
										</div>
										<div class="mod">
											<div class="yui-gf profile">
												<div class="yui-u first">
													<h3><img class="medal" src="../../assets/medal_silver.png" title="CLA Signed" /> <span class="gallery-user">Steven Olmsted</span></h3>
													<h4>YUI Contributor</h4>
													<p><img src="http://www.gravatar.com/avatar/d49156801406cf2236d35e086149691a?s=64&d=http://yuilibrary.com/assets/gravatar-64.png" /><p><a href="../user/solmsted.html">See 42 more by this user.</a> Created: <span title="05 Oct 2012 23:51">10/5/12</span><br /> Last CDN Push: <span title="10 Oct 2012 20:03">10/10/12</span><br /> Build Tag: <a href="../buildtag/model-sync-multi/gallery-2012.10.10-19-59.html">gallery-2012.10.10-19-59</a><br /> Project: <a href="http://yuilibrary.com/projects/yui3">YUI 3</a><br /> License: <a href="http://yuilibrary.com/license/" target="_blank">YUI BSD</a><br /> YUI Version: 3.7.2<br /> Free for use. </div>
												<div class="yui-u">
													<div class="desc"><span class="wikipage"><p>This is a class extension for Y.Model allowing multiple model sync implementations to be used by a single model. When a class is created extending Y.Model, this class extension must come after all other class extensions which implement sync. Model classes using this extension should have a static SYNCS property. The SYNCS property will be an object of key/value pairs. There should be a value for each other sync implementation extension. The keys can be any name you want to give that implementation. When calling the sync methods such as load or save, the options argument object should be given a sync property which matches the name of one of the SYNCS to use.<p>Note that different sync extensions can conflict in other ways, for example Y.ModelSync.Local and Y.ModelSync.REST both use a 'root' property in different ways. This extension only deals with the sync method and does nothing about these other potential conflicts.</span></div>
												</div>
												<div class="tags">
													<ul>
														<li>Tags: <li><a href="../tag/multi.html" title="Search by this tag: multi">multi</a><li><a href="../tag/multiple.html" title="Search by this tag: multiple">multiple</a><li><a href="../tag/solmsted.html" title="Search by this tag: solmsted">solmsted</a><li><a href="../tag/sync.html" title="Search by this tag: sync">sync</a><li><a href="http://yuilibrary.com/gallery/tag/model" title="Search by this tag: model">model</a></ul>
												</div>
											</div>
										</div>
										<ul class="gallery-links">
											<li class="download empty">Download<li class="docs empty">Docs<li class="homepage empty">Homepage<li class="bugs empty">Bugs<li class="source"><a href="https://github.com/solmsted/yui3-gallery/tree/master/src/gallery-model-sync-multi" target="_blank" title="Source">Source</a><li class="example empty">Example<li class="forum empty">Forum<li class="history"><a href="../history/model-sync-multi.html" title="History">History</a></ul>
										<div class="mod">
											<h3 id="code">Code Sample</h3>
											<div class="syntax-highlight" id="yui-syn-1"><pre class="html4strict" style="font-family:monospace;"><span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">script</span> <span style="color: #000066;">src</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;http://yui.yahooapis.com/3.7.2/build/yui/yui-min.js&quot;</span>&gt;&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">script</span>&gt;</span></pre><textarea id="yui-syn-1-plain">&lt;script src=&quot;http://yui.yahooapis.com/3.7.2/build/yui/yui-min.js&quot;&gt;&lt;/script&gt;</textarea>
											</div>
											<div class="syntax-highlight" id="yui-syn-2"><pre class="javascript" style="font-family:monospace;"><span style="color: #006600; font-style: italic;">// Defining a custom Model object within a custom module.</span>
YUI.<span style="color: #660066;">add</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'my-model'</span><span style="color: #339933;">,</span> <span style="color: #003366; font-weight: bold;">function</span> <span style="color: #009900;">&#40;</span>Y<span style="color: #339933;">,</span> moduleName<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
    Y.<span style="color: #660066;">MyModel</span> <span style="color: #339933;">=</span> Y.<span style="color: #660066;">Base</span>.<span style="color: #660066;">create</span><span style="color: #009900;">&#40;</span>moduleName<span style="color: #339933;">,</span> Y.<span style="color: #660066;">Model</span><span style="color: #339933;">,</span> <span style="color: #009900;">&#91;</span>
        Y.<span style="color: #660066;">ModelSync</span>.<span style="color: #660066;">Local</span><span style="color: #339933;">,</span>
        Y.<span style="color: #660066;">ModelSync</span>.<span style="color: #660066;">YQL</span><span style="color: #339933;">,</span>
        Y.<span style="color: #660066;">ModelSync</span>.<span style="color: #660066;">Multi</span> <span style="color: #006600; font-style: italic;">// This comes after the other sync extensions.</span>
    <span style="color: #009900;">&#93;</span><span style="color: #339933;">,</span> <span style="color: #009900;">&#123;</span>
        parse <span style="color: #339933;">:</span> <span style="color: #003366; font-weight: bold;">function</span> <span style="color: #009900;">&#40;</span>results<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
            <span style="color: #000066; font-weight: bold;">return</span> results <span style="color: #339933;">&amp;&amp;</span> results.<span style="color: #660066;">entry</span> <span style="color: #339933;">&amp;&amp;</span> results.<span style="color: #660066;">entry</span>.<span style="color: #660066;">length</span> <span style="color: #339933;">&amp;&amp;</span> results.<span style="color: #660066;">entry</span><span style="color: #009900;">&#91;</span><span style="color: #CC0000;">0</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span>
        <span style="color: #009900;">&#125;</span><span style="color: #339933;">,</span>
        <span style="color: #006600; font-style: italic;">// This query will select the most recent edits to Wikipedia.</span>
        query<span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;select * from atom where url='http://en.wikipedia.org/w/index.php?title=Special:RecentChanges&amp;feed=atom'&quot;</span><span style="color: #339933;">,</span>
        root<span style="color: #339933;">:</span> moduleName
    <span style="color: #009900;">&#125;</span><span style="color: #339933;">,</span> <span style="color: #009900;">&#123;</span>
        SYNCS<span style="color: #339933;">:</span> <span style="color: #009900;">&#123;</span> <span style="color: #006600; font-style: italic;">// The SYNCS property gives each sync extension a unique name.</span>
            local<span style="color: #339933;">:</span> Y.<span style="color: #660066;">ModelSync</span>.<span style="color: #660066;">Local</span><span style="color: #339933;">,</span>
            yql<span style="color: #339933;">:</span> Y.<span style="color: #660066;">ModelSync</span>.<span style="color: #660066;">YQL</span>
        <span style="color: #009900;">&#125;</span>
    <span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span><span style="color: #339933;">,</span> <span style="color: #3366CC;">''</span><span style="color: #339933;">,</span> <span style="color: #009900;">&#123;</span>
    requires<span style="color: #339933;">:</span> <span style="color: #009900;">&#91;</span>
        <span style="color: #3366CC;">'gallery-model-sync-local'</span><span style="color: #339933;">,</span>
        <span style="color: #3366CC;">'gallery-model-sync-multi'</span><span style="color: #339933;">,</span>
        <span style="color: #3366CC;">'gallery-model-sync-yql'</span><span style="color: #339933;">,</span>
        <span style="color: #3366CC;">'model'</span>
    <span style="color: #009900;">&#93;</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
<span style="color: #006600; font-style: italic;">// The application starts here.</span>
YUI<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#123;</span>
    <span style="color: #006600; font-style: italic;">//Last Gallery Build of this module</span>
    gallery<span style="color: #339933;">:</span> <span style="color: #3366CC;">'gallery-2012.10.10-19-59'</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span>.<span style="color: #003366; font-weight: bold;">use</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'my-model'</span><span style="color: #339933;">,</span> <span style="color: #3366CC;">'node'</span><span style="color: #339933;">,</span> <span style="color: #003366; font-weight: bold;">function</span> <span style="color: #009900;">&#40;</span>Y<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
    <span style="color: #006600; font-style: italic;">// Create an instance of the custom model.</span>
    <span style="color: #003366; font-weight: bold;">var</span> myModel <span style="color: #339933;">=</span> <span style="color: #003366; font-weight: bold;">new</span> Y.<span style="color: #660066;">MyModel</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
    myModel.<span style="color: #660066;">load</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#123;</span>
        sync<span style="color: #339933;">:</span> <span style="color: #3366CC;">'yql'</span> <span style="color: #006600; font-style: italic;">// Specify which sync layer is used for load.</span>
    <span style="color: #009900;">&#125;</span><span style="color: #339933;">,</span> <span style="color: #003366; font-weight: bold;">function</span> <span style="color: #009900;">&#40;</span>error<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
        <span style="color: #000066; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span>error<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
            Y.<span style="color: #660066;">log</span><span style="color: #009900;">&#40;</span>error<span style="color: #339933;">,</span> <span style="color: #3366CC;">'error'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
            <span style="color: #000066; font-weight: bold;">return</span><span style="color: #339933;">;</span>
        <span style="color: #009900;">&#125;</span>
&nbsp;
        myModel.<span style="color: #660066;">save</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#123;</span>
            sync<span style="color: #339933;">:</span> <span style="color: #3366CC;">'local'</span> <span style="color: #006600; font-style: italic;">// Specify which sync layer is used for save.</span>
        <span style="color: #009900;">&#125;</span><span style="color: #339933;">,</span> <span style="color: #003366; font-weight: bold;">function</span> <span style="color: #009900;">&#40;</span>error<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
            <span style="color: #000066; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span>error<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
                Y.<span style="color: #660066;">log</span><span style="color: #009900;">&#40;</span>error<span style="color: #339933;">,</span> <span style="color: #3366CC;">'error'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
                <span style="color: #000066; font-weight: bold;">return</span><span style="color: #339933;">;</span>
            <span style="color: #009900;">&#125;</span>
&nbsp;
            <span style="color: #006600; font-style: italic;">// Display the content from localStorage to prove it worked.</span>
            <span style="color: #006600; font-style: italic;">// It should show a json string containing data about the most recent edit to Wikipedia.</span>
            Y.<span style="color: #660066;">one</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'body'</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">append</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'&lt;pre&gt;'</span> <span style="color: #339933;">+</span> localStorage.<span style="color: #660066;">getItem</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'my-model'</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">+</span> <span style="color: #3366CC;">'&lt;/pre&gt;'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        <span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre><textarea id="yui-syn-2-plain">// Defining a custom Model object within a custom module.

YUI.add('my-model', function (Y, moduleName) {

    Y.MyModel = Y.Base.create(moduleName, Y.Model, [

        Y.ModelSync.Local,

        Y.ModelSync.YQL,

        Y.ModelSync.Multi // This comes after the other sync extensions.

    ], {

        parse : function (results) {

            return results &amp;&amp; results.entry &amp;&amp; results.entry.length &amp;&amp; results.entry[0];

        },

        // This query will select the most recent edits to Wikipedia.

        query: &quot;select * from atom where url='http://en.wikipedia.org/w/index.php?title=Special:RecentChanges&amp;feed=atom'&quot;,

        root: moduleName

    }, {

        SYNCS: { // The SYNCS property gives each sync extension a unique name.

            local: Y.ModelSync.Local,

            yql: Y.ModelSync.YQL

        }

    });

}, '', {

    requires: [

        'gallery-model-sync-local',

        'gallery-model-sync-multi',

        'gallery-model-sync-yql',

        'model'

    ]

});



// The application starts here.

YUI({
    //Last Gallery Build of this module
    gallery: 'gallery-2012.10.10-19-59'
}).use('my-model', 'node', function (Y) {

    // Create an instance of the custom model.

    var myModel = new Y.MyModel();

        

    myModel.load({

        sync: 'yql' // Specify which sync layer is used for load.

    }, function (error) {

        if (error) {

            Y.log(error, 'error');

            return;

        }

        

        myModel.save({

            sync: 'local' // Specify which sync layer is used for save.

        }, function (error) {

            if (error) {

                Y.log(error, 'error');

                return;

            }

            

            // Display the content from localStorage to prove it worked.

            // It should show a json string containing data about the most recent edit to Wikipedia.

            Y.one('body').append('&lt;pre&gt;' + localStorage.getItem('my-model') + '&lt;/pre&gt;');

        });

    });

});</textarea>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div id="ft">
					<p class="copyright"> All code on this site is licensed under the <a href="http://yuilibrary.com/license/">BSD License</a> unless stated otherwise.<br />
				</div>
			</div>
		</div>
	</body>
</html>